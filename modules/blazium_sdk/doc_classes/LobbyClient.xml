<?xml version="1.0" encoding="UTF-8" ?>
<class name="LobbyClient" inherits="BlaziumClient" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../../../doc/class.xsd">
	<brief_description>
		A node used to connect to a blazium lobby websocket server.
	</brief_description>
	<description>
		A node used to connect to a lobby server. It can be used to do matchmaking. You care do operations such as create lobbys, join lobbys, etc.
	</description>
	<tutorials>
	</tutorials>
	<methods>
		<method name="connect_to_lobby">
			<return type="bool" />
			<param index="0" name="game_id" type="String" />
			<description>
				Connect to a Blazium Lobby Server using the game_id and [member server_url].
			</description>
		</method>
		<method name="create_lobby">
			<return type="ViewLobbyResponse" />
			<param index="0" name="title" type="String" />
			<param index="1" name="max_players" type="int" default="4" />
			<param index="2" name="password" type="String" default="&quot;&quot;" />
			<description>
				Create a lobby and become host. If you are already in a lobby, you cannot create one. You need to leave first.
				Generates [signal lobby_created] signal.
			</description>
		</method>
		<method name="is_host">
			<return type="bool" />
			<description>
				Returns true if you are the host.
			</description>
		</method>
		<method name="join_lobby">
			<return type="ViewLobbyResponse" />
			<param index="0" name="lobby_id" type="String" />
			<param index="1" name="password" type="String" default="&quot;&quot;" />
			<description>
				Joint a lobby. If you are already in a lobby, you cannot join another one. You need to leave first.
				Generates [signal lobby_joined].
			</description>
		</method>
		<method name="kick_peer">
			<return type="LobbyResponse" />
			<param index="0" name="peer_id" type="String" />
			<description>
				Kick a peer. You need to be host to do so.
				Generates [signal peer_left] signal with kicked set to true.
			</description>
		</method>
		<method name="leave_lobby">
			<return type="LobbyResponse" />
			<description>
				Leave a lobby. You need to be in a lobby to leave one.
				Generates [signal lobby_left].
			</description>
		</method>
		<method name="list_lobby">
			<return type="ListLobbyResponse" />
			<param index="0" name="start" type="int" default="0" />
			<param index="1" name="count" type="int" default="10" />
			<description>
				Lists all lobbies.
			</description>
		</method>
		<method name="lobby_data">
			<return type="LobbyResponse" />
			<param index="0" name="data" type="Variant" />
			<description>
				Send data either to the host, or if you are host send data to all peers.
				Generates [signal received_data] signal.
			</description>
		</method>
		<method name="lobby_data_to">
			<return type="LobbyResponse" />
			<param index="0" name="data" type="Variant" />
			<param index="1" name="target_peer" type="String" />
			<description>
				Send data either to a peer, works only if you are host.
				Generates [signal received_data_to] signal.
			</description>
		</method>
		<method name="lobby_ready">
			<return type="LobbyResponse" />
			<param index="0" name="ready" type="bool" />
			<description>
				Ready up in the lobby. You need to be in a lobby and unready to run this.
				Generates [signal peer_ready].
			</description>
		</method>
		<method name="seal_lobby">
			<return type="LobbyResponse" />
			<param index="0" name="seal" type="bool" />
			<description>
				Seals the lobby. You need to be the host to do this and the lobby needs to be unsealed.
				Generates [signal lobby_sealed].
			</description>
		</method>
		<method name="set_peer_name">
			<return type="LobbyResponse" />
			<param index="0" name="peer_name" type="String" />
			<description>
				Set your peer name.
				Generates [signal peer_named] signal if you are in lobby.
			</description>
		</method>
		<method name="view_lobby">
			<return type="ViewLobbyResponse" />
			<param index="0" name="lobby_id" type="String" default="&quot;&quot;" />
			<param index="1" name="password" type="String" default="&quot;&quot;" />
			<description>
				View data from a lobby. Returns lobby settings and peers.
			</description>
		</method>
	</methods>
	<members>
		<member name="connected" type="bool" setter="" getter="get_connected" default="false">
			True if the client is connected, else false.
		</member>
		<member name="lobby" type="LobbyInfo" setter="" getter="get_lobby">
			The current lobby. Reflects changes to the lobby.
		</member>
		<member name="peer" type="LobbyPeer" setter="" getter="get_peer">
			The current peer. Reflects changes to the self peer.
		</member>
		<member name="peers" type="LobbyPeer[]" setter="" getter="get_peers" default="[]">
			The lobby peers. Reflects changes to all peers.
		</member>
		<member name="server_url" type="String" setter="set_server_url" getter="get_server_url" default="&quot;wss://lobby.blazium.app/connect&quot;">
			Set to what url this lobby should connect to.
		</member>
	</members>
	<signals>
		<signal name="append_log">
			<param index="0" name="command" type="String" />
			<param index="1" name="info" type="String" />
			<param index="2" name="logs" type="String" />
			<description>
				Signals a log from a command.
			</description>
		</signal>
		<signal name="disconnected_from_lobby">
			<description>
				Disconnects from the lobby.
			</description>
		</signal>
		<signal name="lobby_created">
			<param index="0" name="lobby" type="LobbyInfo" />
			<param index="1" name="peers" type="LobbyPeer[]" />
			<description>
				Signal generated after a lobby is created.
			</description>
		</signal>
		<signal name="lobby_joined">
			<param index="0" name="lobby" type="LobbyInfo" />
			<param index="1" name="peers" type="LobbyPeer[]" />
			<description>
				Signal generated after you joint a lobby.
			</description>
		</signal>
		<signal name="lobby_left">
			<description>
				Signal generated after you leave a lobby.
			</description>
		</signal>
		<signal name="lobby_sealed">
			<param index="0" name="sealed" type="bool" />
			<description>
				Signal generated after the host seals the lobby.
			</description>
		</signal>
		<signal name="peer_joined">
			<param index="0" name="peer" type="LobbyPeer" />
			<description>
				Signal generated after a peer joins the lobby.
			</description>
		</signal>
		<signal name="peer_left">
			<param index="0" name="peer" type="LobbyPeer" />
			<param index="1" name="kicked" type="bool" />
			<description>
				Signal generated after a peer leaves the lobby.
			</description>
		</signal>
		<signal name="peer_named">
			<param index="0" name="peer" type="LobbyPeer" />
			<description>
				Signal generated after a peer names himself.
			</description>
		</signal>
		<signal name="peer_ready">
			<param index="0" name="peer" type="LobbyPeer" />
			<param index="1" name="ready" type="bool" />
			<description>
				Signal generated after a peer is ready.
			</description>
		</signal>
		<signal name="received_data">
			<param index="0" name="data" type="Object" />
			<param index="1" name="from_peer" type="LobbyPeer" />
			<description>
				Signal generated after a lobby_data call.
			</description>
		</signal>
		<signal name="received_data_to">
			<param index="0" name="data" type="Object" />
			<param index="1" name="from_peer" type="LobbyPeer" />
			<description>
				Signal generated after a data_to call.
			</description>
		</signal>
	</signals>
</class>
